<header
  class="sticky top-0 z-50 w-full border-b border-slate-200 bg-white/95 p-3 shadow-sm backdrop-blur-md transition-shadow duration-200 md:shadow-md"
>
  <div
    class="flex items-center justify-between gap-6 max-w-screen-2xl mx-auto md:grid md:grid-cols-3 md:gap-6 md:items-center"
  >
    <div class="flex items-center gap-3 md:justify-self-start">
      <button
        mat-icon-button
        class="md:hidden"
        [matMenuTriggerFor]="mobileMenu"
        aria-label="Apri menu"
      >
        <mat-icon>menu</mat-icon>
      </button>
      <img
        class="h-12 w-auto object-contain"
        routerLink="/"
        src="/images/logo.png"
        alt="app logo"
      />
    </div>
    <nav
      class="hidden md:flex items-center gap-6 my-2 uppercase text-lg tracking-wide font-medium md:justify-self-center"
    >
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="exactMatch">Home</a>
      <a routerLink="/shop" routerLinkActive="active" [routerLinkActiveOptions]="exactMatch"
        >Shop</a
      >
      <a routerLink="/test-error" routerLinkActive="active">Errors</a>
    </nav>
    <div class="flex items-center gap-3 md:justify-self-end">
      <!-- Badge con totale pezzi nel carrello -->
      <a
        class="cart-icon"
        [matBadge]="cartService.totalItemsCount()"
        [matBadgeHidden]="cartService.totalItemsCount() === 0"
        matBadgeSize="large"
        routerLink="/cart"
        routerLinkActive="active"
      >
        <mat-icon>shopping_cart</mat-icon>
      </a>
      @if (isLoggedIn) {
        <button mat-stroked-button class="hidden md:inline-flex">Logout</button>
      } @else {
        <button mat-stroked-button class="hidden md:inline-flex">Login</button>
      }
    </div>
  </div>
</header>

<mat-menu #mobileMenu="matMenu" panelClass="mobile-menu">
  <button
    mat-menu-item
    routerLink="/"
    routerLinkActive="active"
    [routerLinkActiveOptions]="exactMatch"
  >
    <mat-icon>home</mat-icon>
    <span>Home</span>
  </button>
  <button
    mat-menu-item
    routerLink="/shop"
    routerLinkActive="active"
    [routerLinkActiveOptions]="exactMatch"
  >
    <mat-icon>storefront</mat-icon>
    <span>Shop</span>
  </button>
  <button mat-menu-item routerLink="/test-error" routerLinkActive="active">
    <mat-icon>error_outline</mat-icon>
    <span>Errors</span>
  </button>
  <mat-divider></mat-divider>
  @if (isLoggedIn) {
    <button mat-menu-item>
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </button>
  } @else {
    <button mat-menu-item>
      <mat-icon>login</mat-icon>
      <span>Login</span>
    </button>
  }
</mat-menu>
